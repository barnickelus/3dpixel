<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Dragon Head – 160-frame Demo (iPad)</title>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">

<style>
/* ---------- CONFIG --------------------------------------------------- */
:root{
  --tile:48px;                               /* native frame size      */
  --cols:32;                                 /* yaw frames             */
  --rows:5;                                  /* pitch frames           */
  --sheet:url("dragon_sprite_160f_48px.png");/* sprite PNG             */

  --zoom:4;                                  /* 1-6   live-adjustable  */
}

/* ---------- BASE LAYOUT --------------------------------------------- */
html,body{
  height:100%;margin:0;
  display:flex;flex-direction:column;justify-content:center;align-items:center;
  background:#202024;color:#eee;font-family:system-ui,-apple-system,sans-serif;
  -webkit-user-select:none;user-select:none;touch-action:none;
}
#sprite{
  width:calc(var(--tile)*var(--zoom));
  height:calc(var(--tile)*var(--zoom));
  background-image:var(--sheet);
  background-repeat:no-repeat;
  background-size:calc(var(--tile)*var(--cols)*var(--zoom))
                  calc(var(--tile)*var(--rows)*var(--zoom));
  image-rendering:pixelated;
  transform-origin:top left;
}
#controls{
  display:flex;flex-wrap:wrap;gap:.6rem;margin-top:1.4rem
}
button{
  font-size:1.4rem;padding:.52rem .9rem;border:none;border-radius:6px;
  background:#444;color:#fff
}
button:active{background:#666}
#zoomWrap{margin-top:1rem;display:flex;gap:.5rem;align-items:center}
input[type=range]{width:140px}
small{opacity:.6}
</style>
</head>
<body>

<!-- the sprite -->
<div id="sprite"></div>

<!-- arrow & play controls -->
<div id="controls">
  <button id="up">▲</button>
  <button id="left">◀︎</button>
  <button id="play">⏯︎</button>
  <button id="right">▶︎</button>
  <button id="down">▼</button>
</div>

<!-- size slider -->
<div id="zoomWrap">
  Size <small>(×)</small>
  <input type="range" min="1" max="6" value="4" id="zoom">
</div>

<script>
/* ---------- GRID INFO (sync with :root) ------------------------------ */
const COLS = 32, ROWS = 5;
const rootStyle = document.documentElement.style;
const sprite = document.getElementById('sprite');

/* ---------- STATE ---------------------------------------------------- */
let yaw = 0;         // 0-31
let pitch = 2;       // 0-4   (middle row)
let auto = true;

/* helper: update CSS background-position ----------------------------- */
function applyFrame(){
  const tile = parseInt(getComputedStyle(document.documentElement)
                        .getPropertyValue('--tile'));
  const zoom = parseInt(getComputedStyle(document.documentElement)
                        .getPropertyValue('--zoom'));
  const step = tile * zoom;
  sprite.style.backgroundPosition = `${-yaw*step}px ${-pitch*step}px`;
}
applyFrame();

/* ---------- autorotate ---------------------------------------------- */
function loop(){
  if(auto){ yaw = (yaw+1)%COLS; applyFrame(); }
  requestAnimationFrame(loop);
}
loop();

/* ---------- button events ------------------------------------------- */
const clamp=(v,min,max)=>Math.max(min,Math.min(max,v));
const left =()=>{auto=false; yaw=(yaw-1+COLS)%COLS; applyFrame();};
const rght =()=>{auto=false; yaw=(yaw+1)%COLS; applyFrame();};
const up   =()=>{auto=false; pitch=clamp(pitch-1,0,ROWS-1); applyFrame();};
const down =()=>{auto=false; pitch=clamp(pitch+1,0,ROWS-1); applyFrame();};
document.getElementById('left' ).onclick=left;
document.getElementById('right').onclick=rght;
document.getElementById('up'   ).onclick=up;
document.getElementById('down' ).onclick=down;
document.getElementById('play' ).onclick=()=>auto=!auto;

/* ---------- size slider --------------------------------------------- */
document.getElementById('zoom').oninput = e=>{
  rootStyle.setProperty('--zoom', e.target.value);
  applyFrame();
};

/* ---------- swipe gestures ------------------------------------------ */
let sx,sy;
sprite.addEventListener('pointerdown',e=>{
  sx=e.clientX; sy=e.clientY; sprite.setPointerCapture(e.pointerId);
});
sprite.addEventListener('pointerup',e=>{
  const dx=e.clientX-sx, dy=e.clientY-sy;
  if(Math.abs(dx)>Math.abs(dy)){ dx>10 ? rght() : dx<-10 && left(); }
  else                         { dy>10 ? down() : dy<-10 && up(); }
});
</script>
</body>
</html>